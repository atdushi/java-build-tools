import java.util.*;

defaultTasks 'helloAgain'

task hello << {
    println 'Hello world!'
}

task hello2 << {
    println 'Hello world2!'
}

task helloAgain(dependsOn : 'hello' ) << {
    println 'Hello helloAgain!'

    // groovy
    4.times {
        println it
    }

    // java
    for(int i=0; i<4; i++){
        Date now = new Date();
        System.out.println(now);
    }
}

helloAgain.doFirst {
    println 'before helloAgain'
}

helloAgain << {
    println 'extension of helloAgain'
}

if (Math.random() < 0.5)
{
    helloAgain.dependsOn 'hello2'
}